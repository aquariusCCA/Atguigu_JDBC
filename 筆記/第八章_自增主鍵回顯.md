# 功能需求
1. **java程序** 获取 **插入** 数据时mysql维护 **自增长** 维护的主键 **id值** ，这就是主键回显

2. 作用：在多表关联插入数据时，一般主表的主键都是自动生成的，所以在插入数据之前无法知道这条数据的主键，但是从表需要在插入数据之前就绑定主表的主键，这是可以使用主键回显技术。

# 功能实现
> 继续沿用之前的表数据

```java
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.Statement;

import org.junit.Test;

import utils.JDBCUtils;

public class ReturnPrimaryKey {
	
	/**
	 * 返回插入的主键！
	 * 主键：数据库帮助维护的自增长的整数主键！
	 * @throws Exception
	 */
	@Test
	public void  returnPrimaryKey() throws Exception{
		Connection connection = null;
		PreparedStatement preparedStatement = null;
		
		try {
			// 1. 獲取數據庫連接
			connection = JDBCUtils.getConnection();
			
			// 2. 编写SQL语句结构
			String sql = "insert into t_user (account,password,nickname) values (?,?,?);";
			
			// 3. 创建预编译的statement，传入SQL语句结构
		    /**
		     * TODO: 第二个参数填入 1 | Statement.RETURN_GENERATED_KEYS
		     *       告诉statement携带回数据库生成的主键！
		     */
			preparedStatement = connection.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS);
			
			// 4. 占位符赋值
			preparedStatement.setObject(1, "xxxxx");
			preparedStatement.setObject(2, "123456@gmail.com");
			preparedStatement.setObject(3, "1000-10-1");
			
			// 5. 执行SQL语句 【注意：不需要传入SQL语句】 DML
			int i = preparedStatement.executeUpdate();
			
			// 6. 结果集解析
			System.out.println("受影響行數 = " + i);
			
			// 一行一列的数据！里面就装主键值！
			ResultSet resultSet = preparedStatement.getGeneratedKeys();
			resultSet.next();
			int anInt = resultSet.getInt(1);
			System.out.println("主鍵值 = " + anInt);
			
			// 7. 释放资源
			JDBCUtils.closeResource(connection, preparedStatement, resultSet);
		} catch (Exception e) {
			// TODO: handle exception
		} finally {
			// TODO: handle finally clause
		}
	}
}
```